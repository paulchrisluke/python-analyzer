"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.auth = void 0;exports.createAuth = createAuth;var _betterAuth = await jitiImport("better-auth");
var _drizzle = await jitiImport("better-auth/adapters/drizzle");
var _d = await jitiImport("drizzle-orm/d1");

// Define the auth configuration function that accepts environment variables
function createAuth(env) {
  // Create Drizzle instance with D1 database
  const db = (0, _d.drizzle)(env.cranberry_auth_db);

  return (0, _betterAuth.betterAuth)({
    emailAndPassword: {
      enabled: true
    },
    database: (0, _drizzle.drizzleAdapter)(db, {
      provider: "sqlite",
      usePlural: true,
      debugLogs: true
    }),
    secret: env.BETTER_AUTH_SECRET,
    baseURL: env.BETTER_AUTH_URL,
    logger: {
      level: "info"
    }
  });
}

// Export a default auth instance for development/testing
const auth = exports.auth = (0, _betterAuth.betterAuth)({
  emailAndPassword: {
    enabled: true
  },
  database: {
    provider: "sqlite",
    url: ":memory:"
  },
  secret: "development-secret",
  baseURL: "http://localhost:3000"
}); /* v9-1e02b7206008777d */
