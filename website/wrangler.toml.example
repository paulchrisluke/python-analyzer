name = "cranberry-auth-worker"
main = "src/index.ts"
compatibility_date = "2025-01-27"
compatibility_flags = ["nodejs_compat"]

# D1 Database configuration
[[d1_databases]]
binding = "DB"
database_name = "cranberry-auth-db"
database_id = "your-database-id-here"

# R2 Bucket for OpenNext incremental cache
[[r2_buckets]]
binding = "NEXT_INC_CACHE_R2_BUCKET"
bucket_name = "your-nextjs-cache-bucket"

# KV Namespace for OpenNext incremental cache (optional)
[[kv_namespaces]]
binding = "NEXT_INC_CACHE_KV"
id = "your-kv-namespace-id-here"

# Environment variables
[vars]
BETTER_AUTH_URL = "https://your-worker.your-subdomain.workers.dev"
CLOUDFLARE_ACCOUNT_ID = "your-cloudflare-account-id"
CLOUDFLARE_D1_DATABASE_ID = "your-d1-database-id"

# Secrets (set using: wrangler secret put SECRET_NAME)
# BETTER_AUTH_SECRET - Required for Better Auth
# CLOUDFLARE_API_TOKEN - Required for D1 HTTP driver operations
